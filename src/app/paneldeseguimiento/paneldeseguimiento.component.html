<app-header (toggleSideBarForMe)="sideBarToggler($event)"></app-header>
<mat-drawer-container>
  <mat-drawer mode="side" [opened]="sideBarOpen">
      <app-sidebar></app-sidebar>
  </mat-drawer>
  <mat-drawer-content>

<p-panel header="SEGUIMIENTO PACIENTES DE RIESGO" [toggleable]="true">
  <div class="ui-g">
      <div class="ui-g-12">            
            <p-panel header="SELECCIONE LOS CRITERIOS DE BUSQUEDAD" [toggleable]="true">

              
               <div class="ui-g">

                <div class="ui-g-6">
                  
                            <div fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="20px" class="stats-cards">
                              <mat-card fxFlex="100">
                                              <p-fieldset legend="UBICACION" [transitionOptions]="'400ms cubic-bezier(0.86, 0, 0.07, 1)'"
                                              >
                                                  Provincia<p-dropdown [options]="provincias" [(ngModel)]="provinciaselected" (onChange)="devolverDistritos()"></p-dropdown>
                                                  Distrito <p-dropdown [options]="dddistritos" [(ngModel)]="distritoselecionado"></p-dropdown>
                                                  <br>
                                                  <br>
                                              </p-fieldset>
                              </mat-card>
                </div>

                </div>
                 

                <div class="ui-g-6">    
               
                
                  <p-fieldset legend="EDAD">
                    EDAD
                    Rango: {{rangoanos[0] + ' - ' + rangoanos[1]}} AÃ‘OS
                    <p-slider [min]="0" [max]="100"  [range]="true" [(ngModel)]="rangoanos" (onChange)="gjj()" [style]="{'width':'14em','margin-top': '0.5em'}" ></p-slider>
                    <br>
                    <br>
                  </p-fieldset>

                </div>
                <mat-divider></mat-divider>

                  <p-fieldset legend="GENERO">
                    <div class="ui-g-12"><p-radioButton name="genero" value="M" label="Masculino" [(ngModel)]="generoselecionado" inputId="opt1"></p-radioButton></div>
                    <div class="ui-g-12"><p-radioButton name="genero" value="F" label="Femenino" [(ngModel)]="generoselecionado" inputId="opt2"></p-radioButton></div>
                    <div class="ui-g-12"><p-radioButton name="genero" value="" label="Ambos" [(ngModel)]="generoselecionado" inputId="opt3"></p-radioButton></div>
                  </p-fieldset>

                </div>

                  <p-fieldset legend="MORBILIDAD" [toggleable]="true">

                     <app-tabla-morbilidades></app-tabla-morbilidades>                

                                 
                  </p-fieldset>

                
             



              
                  <p-footer>
                    <p-button label="BUSCAR" (onClick)="BUSCAR($event)"></p-button>
                </p-footer>
            </p-panel>

            <p-panel header="RESULTADOS DE BUSQUEDA">
             
              <p-scrollPanel [style]="{width: '100%', height: '200px'}" styleClass="custombar2">
               
                    <p-table [columns]="colsresultados" [(value)]="resultados"
                     [style]="{width: '180%', height: '200px'}"    [(contextMenuSelection)]="selectedResultado" 
                     [contextMenu]="cm">
                          <ng-template pTemplate="header" let-columns>
                              <tr>
                                <th></th>
                                  <th *ngFor="let col of columns" [style]="{'font-size': '9px'}">
                                      {{col.header}}
                                  </th>
                              </tr>
                          </ng-template>
                          <ng-template pTemplate="body" let-car let-columns="columns" >
                              <tr [pContextMenuRow]="car" [pContextMenuRowIndex]="rowIndex">
                                  <td>
                                    <a [routerLink]="['/atencion/'+car['NRO_DOCUMENTO']+'/'+car['ID_PACIENTE']+'/'+car['ID_SOLICITUD']]" >Ver Solicitud</a>
                                  </td>
                                  <td *ngFor="let col of columns">
                                          {{car[col.field]}}
                                  </td>
                              </tr>
                          </ng-template>
                   </p-table>

                  <p-contextMenu #cm [model]="items"></p-contextMenu>

              </p-scrollPanel>
                <button type="button" pButton icon="pi pi-file-excel" iconPos="left" label="EXPORTAR A EXCEL" (click)="exportExcel()" style="margin-right: 0.5em;" class="ui-button-success"></button>
            

            </p-panel>
      </div>
      
    


  </div>
</p-panel>

<app-tabla-notificacion></app-tabla-notificacion>
</mat-drawer-content>
</mat-drawer-container>


<app-footer></app-footer>
